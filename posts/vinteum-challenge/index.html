<!doctype html><html class="not-ready lg:text-base" lang=en><head><meta charset=utf-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport><title>
    I did the challenge(again)! - 錆 Blog
  </title><meta name=theme-color><meta content="I did the challenge(again)!" name=description><meta content="I did the challenge(again)!" name=author><link rel="preload stylesheet" as=style href=https://jaoleal.github.io/zola-blog/main.css><style>:root {--bg:#dcd7c9;--bg-dark:#3f4e4f;--header:#e4e4e7;--header-dark:#27272a}</style><link as=image href=https://jaoleal.github.io/zola-blog/icons/theme.svg rel=preload><link href=https://jaoleal.github.io/zola-blog/favicon16x16.png rel=icon type=image/x-icon><link href=https://jaoleal.github.io/zola-blog/posts/vinteum-challenge/ rel=canonical><body class="text-black duration-200 ease-out dark:text-white"><header class="blur-header fixed top-0 z-40 mx-auto min-h-[3.5rem] w-full"><div class="mx-auto w-full max-w-4xl p-3 lg:flex lg:justify-between"><div class="flex justify-between"><div class="flex items-center"><a class="text-2xl font-semibold" href=https://jaoleal.github.io/zola-blog>錆 Blog</a><div class="btn-dark ml-4 h-6 w-6 shrink-0 cursor-pointer text-[0] [background:url(./icons/theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]" aria-label=Dark role=button></div></div></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu?.addEventListener("click",()=>{htmlClass.toggle("open")});const setDark=a=>{htmlClass[a?"add":"remove"]("dark");localStorage.setItem("dark",a)};const darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark")){setDark(true)}else{const a=localStorage.getItem("dark");setDark(a?a==="true":darkScheme.matches)};darkScheme.addEventListener("change",a=>{setDark(a.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-4 pb-16 pt-32 dark:prose-invert"><article><header class=mb-16><h1 class="!my-0 pb-2.5">I did the challenge(again)!</h1><div class="text-sm antialiased opacity-60"><time>2024-09-25</time><span class=mx-1>·</span><span>7min</span><span class=mx-1>·</span><span>João Leal</span></div></header><div class="block-bg mb-12 flex rounded-lg p-2 text-lg"><details><summary class="cursor-pointer py-1 pl-4"><span>Table of Contents</span></summary> <div class=px-2><ul><li><a class="no-underline hover:underline" href=https://jaoleal.github.io/zola-blog/posts/vinteum-challenge/#the-challenge-itself>The challenge itself.</a> <ul><li><a class="no-underline hover:underline" href=https://jaoleal.github.io/zola-blog/posts/vinteum-challenge/#the-fundamentals-being-tested>The fundamentals being tested.</a><li><a class="no-underline hover:underline" href=https://jaoleal.github.io/zola-blog/posts/vinteum-challenge/#completing-the-challenge>Completing the challenge</a></ul></ul></div></details></div><section><p>Hi, again! Vinteum, a Brazilian org that supports open-source developers in Brazil, is releasing its newly program to financiate open-source developers that are starting their careers... Like me! They made a challenge to be able to participate in their programs and i had some thoughts while completing it.<p>I'll focus on the challenge here, but if you're interested in the program, you can check more <a href=https://vinteum.org/bdl/>here</a>.<h1 id=the-challenge-itself>The challenge itself.</h1><p>Soon after you subcribed to the program, theyll send an email with a link to a github classroom repository which will automatically create a fork of their challenge and a README.md that describes everything that you need to do. And basically you have to download, compile the <strong>given version</strong> of the bitcoin core, run their functional tests and make only one fail.<p>Its not the first time that i did this exactly challenge, at the beginning of the year, <a href=https://chaincode.com/>chaincode</a> was offering a similar program where they teach you something and after that, they help you monetize what you learn... basically. Chaincode used the same challenge to select the right developers to maintain in the program and thats because this challenge forces the developer to demonstrate some of the fundamentals required to be a functional developer:<ul><li><p>Finding</p><li><p>Learning</p><li><p>Interpret</p></ul><p>Compiling things by the source is a tricky task since it`ll put your whole environment to work so, if you dont know the base of bash commands in linux and you arent in a linux distro you can sit in <img alt="Fetal position" src=https://www.sleepfoundation.org/wp-content/uploads/2021/08/Fetal-Sleep-Position.jpg> and cry for some hours, after you finished it, go learn and install (someway) linux, the basics are more than enough to follow this blog post and complete the challenge itself. A great source to learn is the <a href="https://www.amazon.com/Linux-Pocket-Guide-Essential-Commands-ebook/dp/B0CWX5XFQT/ref=sr_1_1?adgrpid=1335907907057957&dib=eyJ2IjoiMSJ9.gj0eVn0OjsjZqFmvHk0_WGuOJAsqGIFAbzTeEPEWEdzkNbathf82jb1lCATZ8H-cfGFe2O3H3dsBZdq-WYj2rKQJaFZ2LLNXSiEj7Kyb7EK5UUP2I-jkoOt1Oi57EosFl22qzECKZlXf8FhEfdvp0tYoP_QZ3Or1ug8VSGWB09bugTWoG9VdFXbegEJAYbWDH5pCcgYXiIWxoHdWXTYCyhvAJ2Nh7WJihNnjeBhLjqs.JabI0l4TMK_dYYqMUx0TMfa6hqIwQG7iD8lNhR7L0Kk&dib_tag=se&hvadid=83494438658036&hvbmt=be&hvdev=c&hvlocphy=116068&hvnetw=o&hvqmt=e&hvtargid=kwd-83495166867026%3Aloc-20&hydadcr=16377_13421596&keywords=linux+pocket+guide&qid=1727287492&s=digital-text&sr=1-1">Linux Pocket Guide</a>.<h2 id=the-fundamentals-being-tested>The fundamentals being tested.</h2><p><strong>Finding</strong> is a basic concept. You dont have something and you need to have it, so you go for it. Marjoritarianly youll allways deal with something that you dont know 100% being a developer completing any normal task and learning how to go after information is a prime skill to have. Theres a joke in the comunitty saying that developers are only good google searchers and that partially true! Knowing what, when and where to search things can make your life super easy.<p><strong>Learning</strong> is another basic concept. You dont have information about something but you need to have, so you go for it! But things in tech allways have in-depth knowledges that can make you loose years learning and still didnt covered everything about it. Learning is not simply to read something and reproduce it later, but yes get what you need and get out of there... Trust me, no one knows everything and the more you know, more you find out things that you dont know(a paradox if you think to much).<p>Its not every case that will be already answered by someone, the case of this challenge that requests <strong>interpretation</strong> from the dev. Problably youll see things for the first time and you have to assume a lot of what they are and what theyre doing just by superficial information that your brain can get by simply looking at it or having experience with.<p>you can have another view about how to name these skills but thats what i think and mine maestry and experience with them made the difference between the first and the second time that i did this challenge(The first was not... good).<h2 id=completing-the-challenge>Completing the challenge</h2><p>If you managed to compile the bitcoin core in the right version (v27.1), the next step would run the functional tests written in python found on <code>test/functional/</code> with the command <code>$ python3 test_runner.py</code> and see if any fails, because if any does you did something wrong while compiling and configuring the source code, if every tests passes, success until here!<p>I'll suppose that you, someway, learned about commands like <code>cd</code>, <code>ls</code> and <code>git</code>. you can just google them that youre probably find out exactly what you need when you get stuck.<p>Lets get the challenge done. If you analyze the example in the README.md you can notice by reading the test <code>feature_abortnode.py</code>(the one being broke in the example), you can find it on <code>test/functional/</code> use the command:<pre class=language-Bash data-lang=Bash style=background:#2b303b;color:#c0c5ce><code class=language-Bash data-lang=Bash><span>    </span><span style=color:#96b5b4>cd</span><span> test/functional/ </span><span style=color:#65737e># make sure to be in the bitcoin repository!
</span></code></pre><p>Now we can find that it fails and right in the line 33, the line contains:<pre class=language-Python data-lang=Python style=background:#2b303b;color:#c0c5ce><code class=language-Python data-lang=Python><span> </span><span style=color:#b48ead>with </span><span style=color:#bf616a>self</span><span>.nodes[</span><span style=color:#d08770>0</span><span>].</span><span style=color:#bf616a>assert_debug_log</span><span>(["</span><span style=color:#a3be8c>Failed to disconnect block</span><span>"])
</span></code></pre><p>By intuition, its basically searching a certain string in the log pool, the same that the example aplied a diff commenting it and thats why it failed!<p>Thats the strategy we`ll use to succesfully accomplish the challenge too. Breaking a certain log to fail only one functional test!<p>Interpreting the line 33 of <code>feature_abortnode.py</code> will raise the call of the function <code>assert_debug_log()</code> receiving a string to find.<p>We can use the <code>grep</code> tool to find text in files. Let's use the command<pre class=language-Bash data-lang=Bash style=background:#2b303b;color:#c0c5ce><code class=language-Bash data-lang=Bash><span style=color:#bf616a>$</span><span> grep "</span><span style=color:#a3be8c>assert_debug_log</span><span>" *.py
</span></code></pre><p>to find every python script calling the function.<p>Itll pop a lot of them<pre class=language-Bash data-lang=Bash style=background:#2b303b;color:#c0c5ce><code class=language-Bash data-lang=Bash><span style=color:#bf616a>feature_abortnode.py:</span><span>        with self.nodes</span><span style=color:#b48ead>[</span><span>0</span><span style=color:#b48ead>]</span><span>.assert_debug_log(</span><span style=color:#b48ead>[</span><span>"</span><span style=color:#a3be8c>Failed to disconnect block</span><span>"</span><span style=color:#b48ead>]</span><span>)</span><span style=color:#96b5b4>: </span><span style=color:#65737e>#Look, the one of the example. Its a sign.
</span><span style=color:#bf616a>feature_addrman.py:</span><span>        with self.nodes</span><span style=color:#b48ead>[</span><span>0</span><span style=color:#b48ead>]</span><span>.assert_debug_log(</span><span style=color:#b48ead>[</span><span>"</span><span style=color:#a3be8c>Loaded 0 addresses from peers.dat</span><span>"</span><span style=color:#b48ead>]</span><span>)</span><span style=color:#96b5b4>:
</span><span style=color:#bf616a>feature_addrman.py:</span><span>        with self.nodes</span><span style=color:#b48ead>[</span><span>0</span><span style=color:#b48ead>]</span><span>.assert_debug_log([
</span><span style=color:#bf616a>feature_anchors.py:</span><span>        with self.nodes</span><span style=color:#b48ead>[</span><span>0</span><span style=color:#b48ead>]</span><span>.assert_debug_log(</span><span style=color:#b48ead>[</span><span>"</span><span style=color:#a3be8c>0 block-relay-only anchors will be tried for connections.</span><span>"</span><span style=color:#b48ead>]</span><span>)</span><span style=color:#96b5b4>:
</span><span style=color:#bf616a>feature_anchors.py:</span><span>        with self.nodes</span><span style=color:#b48ead>[</span><span>0</span><span style=color:#b48ead>]</span><span>.assert_debug_log(</span><span style=color:#b48ead>[</span><span>f"</span><span style=color:#a3be8c>DumpAnchors: Flush 1 outbound block-relay-only peer addresses to anchors.dat</span><span>"</span><span style=color:#b48ead>]</span><span>)</span><span style=color:#96b5b4>:
</span><span style=color:#bf616a>feature_anchors.py:</span><span>        with self.nodes</span><span style=color:#b48ead>[</span><span>0</span><span style=color:#b48ead>]</span><span>.assert_debug_log(</span><span style=color:#b48ead>[</span><span>f"</span><span style=color:#a3be8c>Trying to make an anchor connection to {ONION_ADDR}</span><span>"</span><span style=color:#b48ead>]</span><span>)</span><span style=color:#96b5b4>:
</span><span style=color:#bf616a>feature_asmap.py:</span><span>        with self.node.assert_debug_log(</span><span style=color:#b48ead>[</span><span>'</span><span style=color:#a3be8c>Using /16 prefix for IP bucketing</span><span>'</span><span style=color:#b48ead>]</span><span>)</span><span style=color:#96b5b4>:
</span><span style=color:#bf616a>feature_asmap.py:</span><span>        with self.node.assert_debug_log(expected_messages(filename))</span><span style=color:#96b5b4>:
</span><span style=color:#bf616a>feature_asmap.py:</span><span>        with self.node.assert_debug_log(expected_messages(filename))</span><span style=color:#96b5b4>:
</span><span style=color:#bf616a>feature_asmap.py:</span><span>            with self.node.assert_debug_log(expected_messages(self.default_asmap))</span><span style=color:#96b5b4>:
</span><span style=color:#bf616a>feature_asmap.py:</span><span>        with self.node.assert_debug_log(
</span><span style=color:#bf616a>feature_asmap.py:</span><span>        with self.node.assert_debug_log(expected_msgs=</span><span style=color:#b48ead>[</span><span>msg</span><span style=color:#b48ead>]</span><span>)</span><span style=color:#96b5b4>:
</span><span>
</span></code></pre><p>You can check the name of the files and the name of the tests that sucessfuly run after compiling the bitcoin core(Not the skipped ones!) and choose one of them, but be carefull while choosing a test to fail, theres cases where more than one test search for the same string. Ill choose the <code>feature_signet</code> one to break.<p>The same function <code>assert_debug_log</code> is called in the line 77 on <code>feature_signet.py</code><pre class=language-Python data-lang=Python style=background:#2b303b;color:#c0c5ce><code class=language-Python data-lang=Python><span> </span><span style=color:#b48ead>with </span><span style=color:#bf616a>self</span><span>.nodes[</span><span style=color:#d08770>0</span><span>].</span><span style=color:#bf616a>assert_debug_log</span><span>(["</span><span style=color:#a3be8c>Signet derived magic (message start)</span><span>"])
</span></code></pre><p>We can see the String used as a input (<code>Signet derived magic (message start)</code>) and a parameter <code>(message start)</code>.Parameters can change names so we'll stick with only <code>Signet derived magic</code>. In the <code>README.md</code> is explained where we need to change the code to break something<pre class=language-Markdown data-lang=Markdown style=background:#2b303b;color:#c0c5ce><code class=language-Markdown data-lang=Markdown><span style=color:#bf616a>2. Write a minimal commit in </span><span style=color:#a3be8c>`src/`</span><span style=color:#bf616a> (</span><span style=color:#a3be8c>`*.cpp`</span><span style=color:#bf616a> or </span><span style=color:#a3be8c>`*.h`</span><span style=color:#bf616a> files only) that makes this one single test fail, and no others!
</span></code></pre><p>so, lets use more bash commands<pre class=language-Bash data-lang=Bash style=background:#2b303b;color:#c0c5ce><code class=language-Bash data-lang=Bash><span style=color:#bf616a>$</span><span> cd ../.. </span><span style=color:#65737e># to come back two directories 
</span><span>
</span><span style=color:#bf616a>$</span><span> cd src </span><span style=color:#65737e># to go to the src/ directory.
</span><span>
</span><span style=color:#bf616a>$</span><span> ls </span><span style=color:#65737e># to list the content of the directory.
</span></code></pre><p>and a lot of <code>.cpp</code> files will pop on your terminal and we already know a tool to find a given text in files. So lets use it to find who is logging out the "Signet derived magic" with the command:<pre class=language-Bash data-lang=Bash style=background:#2b303b;color:#c0c5ce><code class=language-Bash data-lang=Bash><span style=color:#bf616a>grep -r </span><span>"</span><span style=color:#a3be8c>Signet derived magic</span><span>" *.cpp </span><span style=color:#65737e># The -r flag is important to make the search recursive.
</span></code></pre><p>the file <code>init.cpp</code> will pop out. So lets change the line 893<pre class=language-C++ data-lang=C++ style=background:#2b303b;color:#c0c5ce><code class=language-C++ data-lang=C++><span>    </span><span style=color:#bf616a>LogPrintf</span><span>("</span><span style=color:#a3be8c>Signet derived magic (message start): </span><span style=color:#d08770>%s</span><span style=color:#96b5b4>\n</span><span>", </span><span style=color:#bf616a>HexStr</span><span>(chainparams.</span><span style=color:#bf616a>MessageStart</span><span>()));
</span></code></pre><p>to:<pre class=language-C++ data-lang=C++ style=background:#2b303b;color:#c0c5ce><code class=language-C++ data-lang=C++><span>    </span><span style=color:#bf616a>LogPrintf</span><span>("</span><span style=color:#a3be8c> Sao Paulo !!!!! : </span><span style=color:#d08770>%s</span><span style=color:#96b5b4>\n</span><span>", </span><span style=color:#bf616a>HexStr</span><span>(chainparams.</span><span style=color:#bf616a>MessageStart</span><span>()));
</span></code></pre><p>The theory is: Even if the <code>init.cpp</code> do all its functions correctly but doesnt log it, the python script cannot assert the execution and will think that something is wrong. And since we made sure to choose a String that is only verified by one python script the next task is to just check if our changes accomplish the challenge annndd...<p>Success!<pre class=language-Bash data-lang=Bash style=background:#2b303b;color:#c0c5ce><code class=language-Bash data-lang=Bash></code></pre></section><hr><footer class="mt-12 flex flex-col"><div class="mb-2 flex flex-wrap"><span class="block-bg mb-1.5 mr-1.5 rounded-lg px-5 py-1.5">Tags </span><a class="block-bg block-hover mb-1.5 mr-1.5 rounded-lg px-5 py-1.5 no-underline" href=https://jaoleal.github.io/zola-blog/tags/vinteum/>Vinteum</a><a class="block-bg block-hover mb-1.5 mr-1.5 rounded-lg px-5 py-1.5 no-underline" href=https://jaoleal.github.io/zola-blog/tags/opensource/>opensource</a><a class="block-bg block-hover mb-1.5 mr-1.5 rounded-lg px-5 py-1.5 no-underline" href=https://jaoleal.github.io/zola-blog/tags/development/>development</a></div></footer><nav class="block-bg mt-12 flex rounded-lg text-lg"><a class="block-hover-mask flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline" href=https://jaoleal.github.io/zola-blog/posts/sob-weekly-2/><span class=mr-1.5>←</span><span>SoB weekly 2!</span></a></nav></article></main><footer class="mx-auto flex max-w-3xl flex-wrap items-center px-8 py-4 text-sm opacity-60"><div class="mr-auto basis-full lg:basis-1/2">© 2024 <a class=link href=https://jaoleal.github.io/zola-blog>João Leal</a></div><div class="flex basis-full lg:basis-1/2 lg:justify-end"><a class="link mr-6 lg:ml-6" href=https://www.getzola.org/ rel=noopener target=_blank>Powered by Zola</a><a class=link href=https://github.com/st1020/kita rel=noopener target=_blank>✎ Kita</a></div></footer>